name: matrix workflow
on:
  push:
    branches:
      - main

jobs:
  buildJob:
    strategy:
    # this matrix means the same job will run for all the different combinations of the variables defined in the matrix
      matrix:
        ## here you create a set of variables that you can access via the matrix context
        # you can have multiple variables in the 
        # in this case we are adding a variable for different node versions and different opetating systems or runners
        operatingSystems: [ubuntu-latest, windows-latest]
        nodeVersions: [14, 16, 18]
        # this is a reserved key that you use to define  combinations you may want - allows you add stand alone combinations
        # exclude allows you to remove specific combinations you want to exclude from the generated matrix 
        include:
          - operatingSystems: ubuntu-latest
            nodeVersions: 14
          - operatingSystems: windows-latest
            nodeVersions: 16
        
        exclude:
          - operatingSystems: windows-latest
            nodeVersions: 14

    runs-on: ${{ matrix.operatingSystems }}
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.nodeVersions}}
      - name: Install dependencies
        run: npm ci
      - name: Run build script
        run: npm run build

